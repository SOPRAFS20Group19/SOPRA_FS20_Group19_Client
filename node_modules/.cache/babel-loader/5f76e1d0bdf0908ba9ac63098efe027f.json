{"ast":null,"code":"import _regeneratorRuntime from\"/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _taggedTemplateLiteral from\"/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  margin-top: 20px;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  color: white;\\n  text-align: left;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React from'react';import styled from'styled-components';import{BaseContainer}from'../../helpers/layout';import{api,handleError}from'../../helpers/api';//import Player from '../../views/Player';\n//import { Spinner } from '../../views/design/Spinner';\nimport{Button}from'../../views/design/Button';import{withRouter}from'react-router-dom';import User from\"../shared/models/User\";import Profile from\"../../views/Profile\";// import EditProfile from \"../editprofile/EditProfile\";\nvar Container=styled(BaseContainer)(_templateObject());var ButtonContainer=styled.div(_templateObject2());var UserProfile=/*#__PURE__*/function(_React$Component){_inherits(UserProfile,_React$Component);function UserProfile(){var _this;_classCallCheck(this,UserProfile);_this=_possibleConstructorReturn(this,_getPrototypeOf(UserProfile).call(this));_this.state={loggedInUserId:localStorage.getItem(\"userId\"),userToBeShownId:localStorage.getItem(\"showUserId\"),userToBeShown:null};_this.getUser();return _this;}_createClass(UserProfile,[{key:\"getUser\",value:function(){var _getUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,response,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;url='/users/'+this.state.userToBeShownId;_context.next=4;return api.get(url);case 4:response=_context.sent;user=new User(response.data);this.setState({userToBeShown:user});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);alert(\"Something went wrong while displaying the user profile: \\n\".concat(handleError(_context.t0)));case 12:case\"end\":return _context.stop();}}},_callee,this,[[0,9]]);}));function getUser(){return _getUser.apply(this,arguments);}return getUser;}()},{key:\"editProfile\",value:function editProfile(){this.setState({mounted:false});this.props.history.push('/game/dashboard/user/edit');}},{key:\"returnToDashboard\",value:function returnToDashboard(){localStorage.removeItem(\"showUserID\");this.setState({userToBeShownId:null});this.setState({userToBeShown:null});this.props.history.push('/game/dashboard');}},{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.getUser();case 1:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){this.getUser();}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(BaseContainer,null,React.createElement(Container,null,React.createElement(\"h2\",null,\"User: \",this.state.userToBeShown?this.state.userToBeShown.username:null,\" \"),React.createElement(\"div\",null,this.state.userToBeShown!=null?React.createElement(Profile,{user:this.state.userToBeShown}):null),React.createElement(\"div\",null,this.state.loggedInUserId===this.state.userToBeShownId?React.createElement(ButtonContainer,null,React.createElement(Button,{onClick:function onClick(){_this2.editProfile();}},\"Edit your profile\")):null),React.createElement(\"div\",null,React.createElement(ButtonContainer,null,React.createElement(Button,{width:\"100%\",onClick:function onClick(){_this2.returnToDashboard();}},\"Return to the Dashboard\")))));}}]);return UserProfile;}(React.Component);export default withRouter(UserProfile);","map":{"version":3,"sources":["/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/src/components/userprofile/UserProfile.js"],"names":["React","styled","BaseContainer","api","handleError","Button","withRouter","User","Profile","Container","ButtonContainer","div","UserProfile","state","loggedInUserId","localStorage","getItem","userToBeShownId","userToBeShown","getUser","url","get","response","user","data","setState","alert","mounted","props","history","push","removeItem","prevProps","prevState","snapshot","username","editProfile","returnToDashboard","Component"],"mappings":"ioEAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,OAAQC,aAAR,KAA4B,sBAA5B,CACA,OAAQC,GAAR,CAAaC,WAAb,KAA+B,mBAA/B,CACA;AACA;AACA,OAAQC,MAAR,KAAqB,2BAArB,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,IAAP,KAAiB,uBAAjB,CACA,MAAOC,CAAAA,OAAP,KAAoB,qBAApB,CACA;AAEA,GAAMC,CAAAA,SAAS,CAAGR,MAAM,CAACC,aAAD,CAAT,mBAAf,CAKA,GAAMQ,CAAAA,eAAe,CAAGT,MAAM,CAACU,GAAV,oBAArB,C,GAMMC,CAAAA,W,iFACF,sBAAc,6CACV,+EACA,MAAKC,KAAL,CAAa,CACTC,cAAc,CAAEC,YAAY,CAACC,OAAb,CAAqB,QAArB,CADP,CAETC,eAAe,CAAEF,YAAY,CAACC,OAAb,CAAqB,YAArB,CAFR,CAGTE,aAAa,CAAE,IAHN,CAAb,CAKA,MAAKC,OAAL,GAPU,aAQb,C,wSAIaC,G,CAAM,UAAY,KAAKP,KAAL,CAAWI,e,uBAEZd,CAAAA,GAAG,CAACkB,GAAJ,CAAQD,GAAR,C,QAAjBE,Q,eAEAC,I,CAAO,GAAIhB,CAAAA,IAAJ,CAASe,QAAQ,CAACE,IAAlB,C,CAEb,KAAKC,QAAL,CAAc,CAACP,aAAa,CAAEK,IAAhB,CAAd,E,+EAEAG,KAAK,qEAA8DtB,WAAW,aAAzE,EAAL,C,oMAIM,CACV,KAAKqB,QAAL,CAAc,CAACE,OAAO,CAAE,KAAV,CAAd,EACA,KAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,2BAAxB,EACH,C,6DAEkB,CACff,YAAY,CAACgB,UAAb,CAAwB,YAAxB,EACA,KAAKN,QAAL,CAAc,CAACR,eAAe,CAAE,IAAlB,CAAd,EACA,KAAKQ,QAAL,CAAc,CAACP,aAAa,CAAE,IAAhB,CAAd,EACA,KAAKU,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,iBAAxB,EACH,C,mQAGG,KAAKX,OAAL,G,wOAGea,S,CAAWC,S,CAAWC,Q,CAAU,CAC/C,KAAKf,OAAL,GACH,C,uCAEQ,iBACL,MACI,qBAAC,aAAD,MACI,oBAAC,SAAD,MACI,uCAAW,KAAKN,KAAL,CAAWK,aAAX,CAA2B,KAAKL,KAAL,CAAWK,aAAX,CAAyBiB,QAApD,CAA+D,IAA1E,KADJ,CAEI,+BACC,KAAKtB,KAAL,CAAWK,aAAX,EAA4B,IAA5B,CACG,oBAAC,OAAD,EAAS,IAAI,CAAE,KAAKL,KAAL,CAAWK,aAA1B,EADH,CAEG,IAHJ,CAFJ,CAOI,+BACC,KAAKL,KAAL,CAAWC,cAAX,GAA8B,KAAKD,KAAL,CAAWI,eAAzC,CACG,oBAAC,eAAD,MACI,oBAAC,MAAD,EAAQ,OAAO,CAAE,kBAAM,CAAC,MAAI,CAACmB,WAAL,GAAmB,CAA3C,sBADJ,CADH,CAMK,IAPN,CAPJ,CAgBI,+BACI,oBAAC,eAAD,MACI,oBAAC,MAAD,EACI,KAAK,CAAC,MADV,CAEI,OAAO,CAAE,kBAAM,CACX,MAAI,CAACC,iBAAL,GACH,CAJL,4BADJ,CADJ,CAhBJ,CADJ,CADJ,CAiCH,C,yBA/EqBrC,KAAK,CAACsC,S,EAkFhC,cAAehC,CAAAA,UAAU,CAACM,WAAD,CAAzB","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport {BaseContainer} from '../../helpers/layout';\nimport {api, handleError} from '../../helpers/api';\n//import Player from '../../views/Player';\n//import { Spinner } from '../../views/design/Spinner';\nimport {Button} from '../../views/design/Button';\nimport {withRouter} from 'react-router-dom';\nimport User from \"../shared/models/User\";\nimport Profile from \"../../views/Profile\";\n// import EditProfile from \"../editprofile/EditProfile\";\n\nconst Container = styled(BaseContainer)`\n  color: white;\n  text-align: left;\n`;\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n`;\n\nclass UserProfile extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            loggedInUserId: localStorage.getItem(\"userId\"),\n            userToBeShownId: localStorage.getItem(\"showUserId\"),\n            userToBeShown: null\n        };\n        this.getUser();\n    }\n\n    async getUser() {\n        try {\n            const url = '/users/' + this.state.userToBeShownId;\n\n            const response = await api.get(url);\n\n            const user = new User(response.data);\n\n            this.setState({userToBeShown: user});\n        } catch (e) {\n            alert(`Something went wrong while displaying the user profile: \\n${handleError(e)}`);\n        }\n    }\n\n    editProfile() {\n        this.setState({mounted: false});\n        this.props.history.push('/game/dashboard/user/edit');\n    }\n\n    returnToDashboard(){\n        localStorage.removeItem(\"showUserID\")\n        this.setState({userToBeShownId: null});\n        this.setState({userToBeShown: null});\n        this.props.history.push('/game/dashboard');\n    }\n\n    async componentDidMount() {\n        this.getUser();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        this.getUser();\n    }\n\n    render() {\n        return (\n            <BaseContainer>\n                <Container>\n                    <h2>User: {this.state.userToBeShown ? this.state.userToBeShown.username : null} </h2>\n                    <div>\n                    {this.state.userToBeShown != null ? (\n                        <Profile user={this.state.userToBeShown}/>\n                    ) : null}\n                    </div>\n                    <div>\n                    {this.state.loggedInUserId === this.state.userToBeShownId ?\n                        <ButtonContainer>\n                            <Button onClick={() => {this.editProfile()}}>\n                                Edit your profile\n                            </Button>\n                        </ButtonContainer>\n                        : null}\n                    </div>\n                    <div>\n                        <ButtonContainer>\n                            <Button\n                                width=\"100%\"\n                                onClick={() => {\n                                    this.returnToDashboard();\n                                }}\n                            >\n                                Return to the Dashboard\n                            </Button>\n                        </ButtonContainer>\n                    </div>\n                </Container>\n            </BaseContainer>\n        );\n    }\n}\n\nexport default withRouter(UserProfile);\n"]},"metadata":{},"sourceType":"module"}