{"ast":null,"code":"import _regeneratorRuntime from\"/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _taggedTemplateLiteral from\"/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  list-style: none;\\n  padding-left: 0;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  color: white;\\n  text-align: center;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React from'react';import styled from'styled-components';import{BaseContainer}from'../../helpers/layout';import{api,handleError}from'../../helpers/api';import Player from'../../views/Player';//import UserProfile from '../../components/userprofile/UserProfile';\n//import EditProfile from \"../editprofile/EditProfile\";\nimport{Spinner}from'../../views/design/Spinner';import{Button}from'../../views/design/Button';import{withRouter}from'react-router-dom';// import UserProfile from \"../userprofile/UserProfile\";\nvar Container=styled(BaseContainer)(_templateObject());var Users=styled.ul(_templateObject2());var PlayerContainer=styled.li(_templateObject3());export var Game=/*#__PURE__*/function(_React$Component){_inherits(Game,_React$Component);function Game(){var _this;_classCallCheck(this,Game);_this=_possibleConstructorReturn(this,_getPrototypeOf(Game).call(this));_this.state={users:null,loggedInUserToken:localStorage.getItem(\"token\"),loggedInUserId:localStorage.getItem(\"userId\")};return _this;}_createClass(Game,[{key:\"logout\",value:function logout(){localStorage.removeItem('token');localStorage.removeItem('userId');this.setState({loggedInUserToken:null});this.setState({loggedInUserId:null});this.props.history.push('/login');}},{key:\"showProfile\",value:function showProfile(id){localStorage.setItem('showUserId',id);this.props.history.push({pathname:'/game/dashboard/user',userId:id});}},{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.get('/users');case 3:response=_context.sent;// delays continuous execution of an async operation for 1 second.\n// This is just a fake async call, so that the spinner can be displayed\n// feel free to remove it :)\n// await new Promise(resolve => setTimeout(resolve, 1000));\n// Get the returned users and update the state.\nthis.setState({users:response.data});// This is just some data for you to see what is available.\n// Feel free to remove it.\nconsole.log('request to:',response.request.responseURL);console.log('status code:',response.status);console.log('status text:',response.statusText);console.log('requested data:',response.data);// See here to get more data.\nconsole.log(response);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);alert(\"Something went wrong while fetching the users: \\n\".concat(handleError(_context.t0)));case 15:case\"end\":return _context.stop();}}},_callee,this,[[0,12]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;return React.createElement(Container,null,React.createElement(\"h2\",null,\"Happy Coding! \"),React.createElement(\"p\",null,\"Get all users from secure end point:\"),!this.state.users?React.createElement(Spinner,null):React.createElement(\"div\",null,React.createElement(Users,null,this.state.users.map(function(user){return React.createElement(PlayerContainer,{key:user.id},React.createElement(Player,{user:user}),React.createElement(Button,{onClick:function onClick(){_this2.showProfile(user.id);},style:{width:300}},\"Show Profile of \",user.username));})),React.createElement(Button,{width:\"100%\",onClick:function onClick(){_this2.logout();}},\"Logout\")));}}]);return Game;}(React.Component);export default withRouter(Game);","map":{"version":3,"sources":["/Users/luisknufinke/Documents/UZH/04 - FS20/Softwarepraktikum/Milestone 1 Individual/sopra-fs20-client/src/components/game/Game.js"],"names":["React","styled","BaseContainer","api","handleError","Player","Spinner","Button","withRouter","Container","Users","ul","PlayerContainer","li","Game","state","users","loggedInUserToken","localStorage","getItem","loggedInUserId","removeItem","setState","props","history","push","id","setItem","pathname","userId","get","response","data","console","log","request","responseURL","status","statusText","alert","map","user","showProfile","width","username","logout","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { BaseContainer } from '../../helpers/layout';\nimport { api, handleError } from '../../helpers/api';\nimport Player from '../../views/Player';\n//import UserProfile from '../../components/userprofile/UserProfile';\n//import EditProfile from \"../editprofile/EditProfile\";\nimport { Spinner } from '../../views/design/Spinner';\nimport { Button } from '../../views/design/Button';\nimport { withRouter } from 'react-router-dom';\n// import UserProfile from \"../userprofile/UserProfile\";\n\n\n\nconst Container = styled(BaseContainer)`\n  color: white;\n  text-align: center;\n`;\n\nconst Users = styled.ul`\n  list-style: none;\n  padding-left: 0;\n`;\n\nconst PlayerContainer = styled.li`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\n\nexport class Game extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      users: null,\n      loggedInUserToken: localStorage.getItem(\"token\"),\n      loggedInUserId: localStorage.getItem(\"userId\")\n    };\n  }\n\n  logout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('userId');\n    this.setState({ loggedInUserToken: null });\n    this.setState({ loggedInUserId: null });\n    this.props.history.push('/login');\n  }\n\n  showProfile(id) {\n    localStorage.setItem('showUserId', id);\n    this.props.history.push({pathname: '/game/dashboard/user', userId: id});\n  }\n\n  async componentDidMount() {\n    try {\n      const response = await api.get('/users');\n      // delays continuous execution of an async operation for 1 second.\n      // This is just a fake async call, so that the spinner can be displayed\n      // feel free to remove it :)\n      // await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Get the returned users and update the state.\n      this.setState({ users: response.data });\n\n      // This is just some data for you to see what is available.\n      // Feel free to remove it.\n      console.log('request to:', response.request.responseURL);\n      console.log('status code:', response.status);\n      console.log('status text:', response.statusText);\n      console.log('requested data:', response.data);\n\n      // See here to get more data.\n      console.log(response);\n    } catch (error) {\n      alert(`Something went wrong while fetching the users: \\n${handleError(error)}`);\n    }\n  }\n\n  render() {\n    return (\n      <Container>\n        <h2>Happy Coding! </h2>\n        <p>Get all users from secure end point:</p>\n        {!this.state.users ? (\n          <Spinner />\n        ) : (\n          <div>\n            <Users>\n              {this.state.users.map(user => {\n                return (\n                  <PlayerContainer key={user.id}>\n                    <Player user={user}/>\n                    <Button\n                        onClick={() => {this.showProfile(user.id)}}\n                        style={{width: 300}}\n                    >\n                      Show Profile of {user.username}\n                    </Button>\n                  </PlayerContainer>\n                );\n              })}\n            </Users>\n            <Button\n              width=\"100%\"\n              onClick={() => {\n                this.logout();\n              }}\n            >\n              Logout\n            </Button>\n          </div>\n        )}\n      </Container>\n    );\n  }\n}\n\nexport default withRouter(Game);"]},"metadata":{},"sourceType":"module"}